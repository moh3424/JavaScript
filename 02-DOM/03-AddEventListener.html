<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>AddEventListener</title>
    <style>
        div { width: 50px; height: 50px; position: relative;}
    </style>
</head>
<body>
    <button id = "bouton"> Déplacer le carré</button>
    <div class="rose"></div>


    <script>
        // La méthode addEventListener :
        // en cliquant sur le bouton, le carré se déplace ET change de couleur.

        // Problématique : quand on met plusieurs événements identiques sur le meme bouton, dans la syntaxe vu jusqu'ici seul le dérnier événement est pris en compte

        var carre = document.querySelector('.rose');
        var bouton = document.querySelector('#bouton');
        var leftPosition = 0; // valeur de la position left du carré

        function deplacement(){
            leftPosition += 10; // augmente la valeur de la variable de 10
            carre.style.left = leftPosition + 'xp';
        }
        function couleur() {
            carre.style.backgroundColor = 'yelow';// les proprités CSS qui comportent un tiret : on leur enlève ce tiret et on met une majuscule
        }

        // seul le dernier événement est pris en compte avec cette methode :
        // bouton.onclick = deplacement; // on écrit la fonction sans sa paire de () sinon elle est appelée et exécutée immédiatement sans attendre  l'ordre du clic dont elle dépend

        //  bouton.onclick = couleur; // on constate que le carré devient jaune mais ne se déplace plus, car c'est le dernier évenement qui prévaut avec cette syntaxe onclick

         // Pour s'en sortir on utilise addEventListener :
        //  bouton.addEventListener('click', deplacement);
        //  bouton.addEventListener('click', couleur);// l'evenement click s'écrit sans le "on", et la fonction couleur sans paire () pour ne pas qu'elle s'exécute immediatement.la fonction couleur est appelée une fonction CALLBACK car elle est passée en argument (= en paramètre) d'une autre fonction, ici dans addEventListener(). En effet, elle attend l'ordre de cette dérnière pour s'exécuter

         // addEventListener() veut dire litérallement "ajout un écouteur d'évenement". Cela signifie que l'on ajoute un événement à un élément (ici au bouton).

         // cette méthode est utile aussi si vous utilisez des plugins ou bibliothèques JS qui font appel à des événements identiques au votre

         //--------------

          //on peut aussi écrire une fonction anonyme directement dans AddEventListener:
        // bouton.addEventListener('click', function(){
        // carre.style.borderRadius = '50px';
        //     });
            
        // bouton.addEventListener('click', function(){
        //         carre.style.border = '2px solid red';
        //     });
         
         
    
    </script>
    
</body>
</html>